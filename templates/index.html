<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <title>Yes / No Audio Recognition</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>

<div class="container">
    <div class="card">
        <h1>üé§ Audio Recognition</h1>
        <p class="subtitle">–ó–∞–≤–∞–Ω—Ç–∞–∂—Ç–µ –∞—É–¥—ñ–æ—Ñ–∞–π–ª (.wav –∞–±–æ .mp3)</p>

        <form id="form">
            <label class="upload-box">
                <input type="file" id="file" accept=".wav,.mp3" required hidden>
                <span id="file-name">–ù–∞—Ç–∏—Å–Ω—ñ—Ç—å –∞–±–æ –ø–µ—Ä–µ—Ç—è–≥–Ω—ñ—Ç—å —Ñ–∞–π–ª</span>
            </label>

            <button type="submit">–†–æ–∑–ø—ñ–∑–Ω–∞—Ç–∏</button>
        </form>

        <div id="result" class="result hidden">
            <p><strong>–†–µ–∑—É–ª—å—Ç–∞—Ç:</strong></p>
            <p id="class"></p>
            <p id="confidence"></p>
        </div>
    </div>
</div>

<script>
const fileInput = document.getElementById("file");
const fileName = document.getElementById("file-name");
const form = document.getElementById("form");
const resultBox = document.getElementById("result");

fileInput.addEventListener("change", () => {
    fileName.textContent = fileInput.files[0].name;
});

form.onsubmit = async (e) => {
    e.preventDefault();

    const file = fileInput.files[0];
    const formData = new FormData();
    formData.append("file", file);

    resultBox.classList.add("hidden");

    const response = await fetch("/recognize", {
        method: "POST",
        body: formData
    });

    const data = await response.json();

    document.getElementById("class").textContent =
        `–ö–ª–∞—Å: ${data.class.toUpperCase()}`;
    document.getElementById("confidence").textContent =
        `–í–ø–µ–≤–Ω–µ–Ω—ñ—Å—Ç—å: ${(data.confidence * 100).toFixed(1)} %`;

    resultBox.classList.remove("hidden");
};
</script>

</body>
</html>
